<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <style>
        @page { size: A4; margin: 2cm; }
        body { font-family: Helvetica, Arial, sans-serif; font-size: 14px; line-height: 1.6; color: #333; }
        .header { margin-bottom: 40px; border-bottom: 2px solid #333; padding-bottom: 10px; }
        .header h1 { margin: 0; font-size: 26px; text-transform: uppercase; letter-spacing: 1px; }
        .agency-info { margin-top: 5px; font-size: 13px; color: #444; }

        .details { display: flex; justify-content: space-between; margin-bottom: 35px; }
        .client-info, .meta-info { font-size: 14px; }
        .meta-info { text-align: right; }

        table { width: 100%; border-collapse: collapse; margin-bottom: 25px; }
        th { text-align: left; border-bottom: 2px solid #ccc; padding: 10px 5px; font-weight: bold; }
        td { padding: 10px 5px; border-bottom: 1px solid #eee; }

        .amount-right { text-align: right; }

        .totals { width: 280px; float: right; margin-top: 10px; }
        .totals-row { display: flex; justify-content: space-between; padding: 6px 0; }
        .grand-total { font-weight: bold; font-size: 16px; border-top: 2px solid #333; margin-top: 12px; padding-top: 12px; }

        .status { font-weight: bold; text-transform: uppercase; }
        .status.confirmed { color: green; }
        .status.pending { color: orange; }
        .status.cancelled { color: red; }

        .footer { margin-top: 60px; font-size: 12px; color: #555; text-align: center; line-height: 1.4; }
    </style>
</head>

<body>

    <!-- HEADER -->
    <div class="header">
        <h1>Facture de Services</h1>
        <div class="agency-info">
            <strong>Dima Voyages</strong><br>
            35 Rue d'Iran Tunis | Centre Lamti El Mourouj 1 | Centre X Menzah 9<br>
            Téléphone : +216 29 145 151 <br>
            Email : dimavoyagestunisia@gmail.com
        </div>
    </div>

    <!-- CLIENT + META INFO -->
    <div class="details">
        <div class="client-info">
            <strong>Facturé à :</strong><br>
            {{ booking.client.name }}<br>
            Tél : {{ booking.client.phone }}<br>
            Passeport : {{ booking.client.passport }}
        </div>

        <div class="meta-info">
            <strong>Facture n° :</strong> {{ booking.ref }}<br>
            <strong>Date d’émission :</strong> {{ booking.created_at|date:"Y-m-d" }}<br>
            <strong>Statut :</strong>
            <span class="status {{ booking.status }}">{{ booking.status }}</span>
        </div>
    </div>
    <div style="clear: both;"></div>

    <!-- TABLE — SERVICES -->
    <table>
        <thead>
            <tr>
                <th>Description du service</th>
                <th>Type</th>
                <th class="amount-right">Montant (TND)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>{{ booking.description }}</td>
                <td>{{ booking.get_booking_type_display }}</td>
                <td class="amount-right">{{ booking.total_amount }}</td>
            </tr>
        </tbody>
    </table>

    <!-- TOTALS -->
    <div class="totals">
        <div class="totals-row">
            <span>Total :</span>
            <span>{{ booking.total_amount }}</span>
        </div>
        <div class="totals-row">
            <span>Montant payé :</span>
            <span>{{ booking.paid_amount }}</span>
        </div>
        <div class="totals-row grand-total">
            <span>Solde dû :</span>
            <span>{{ booking.outstanding }}</span>
        </div>
    </div>

    <div style="clear: both;"></div>

    <!-- FOOTER -->
    <div class="footer">
        Cette facture est générée automatiquement par Dima Voyages.<br>
        Merci pour votre confiance.
    </div>

</body>
</html>

